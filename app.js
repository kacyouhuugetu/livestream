(function(t){function n(n){for(var i,r,s=n[0],u=n[1],l=n[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(t[i]=u[i]);c&&c(n);while(f.length)f.shift()();return o.push.apply(o,l||[]),e()}function e(){for(var t,n=0;n<o.length;n++){for(var e=o[n],i=!0,s=1;s<e.length;s++){var u=e[s];0!==a[u]&&(i=!1)}i&&(o.splice(n--,1),t=r(r.s=e[0]))}return t}var i={},a={app:0},o=[];function r(n){if(i[n])return i[n].exports;var e=i[n]={i:n,l:!1,exports:{}};return t[n].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=i,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var i in t)r.d(e,i,function(n){return t[n]}.bind(null,i));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],u=s.push.bind(s);s.push=n,s=s.slice();for(var l=0;l<s.length;l++)n(s[l]);var c=u;o.push([0,"chunk-vendors"]),e()})({0:function(t,n,e){t.exports=e("56d7")},"034f":function(t,n,e){"use strict";var i=e("85ec"),a=e.n(i);a.a},"119a":function(t,n,e){},"56d7":function(t,n,e){"use strict";e.r(n);e("e260"),e("e6cf"),e("cca6"),e("a79d");var i=e("2b0e"),a=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{attrs:{id:"app"}},[e("table",{staticClass:"live-window-table"},[e("tbody",t._l(t.windowsMatrix,(function(n,i){return e("tr",{key:"row-"+i},t._l(n,(function(n,i){return e("td",{key:n.id,attrs:{width:n.width,height:n.height}},[e("LiveWindow",{ref:n.id,refInFor:!0,attrs:{window:n},on:{addSource:t.setManipulateWindow}})],1)})),0)})),0)]),e("div",{staticClass:"side-toolbar"},[e("van-icon",{staticStyle:{cursor:"pointer"},attrs:{name:"setting-o",color:"#4b00f9",size:"40"},on:{click:function(n){n.stopPropagation(),t.showManage=!0}}})],1),e("van-dialog",{attrs:{title:t.manipulateWindow?t.manipulateWindow.name:"",showConfirmButton:!1,closeOnClickOverlay:!0},model:{value:t.showManipulateWindow,callback:function(n){t.showManipulateWindow=n},expression:"showManipulateWindow"}},[e("LiveWindowForm",{ref:"liveWindowForm",attrs:{window:t.manipulateWindow},on:{submit:t.manipulateWindowSubmit}})],1),e("van-dialog",{attrs:{title:"操作",showConfirmButton:!1,closeOnClickOverlay:!0},model:{value:t.showManage,callback:function(n){t.showManage=n},expression:"showManage"}},[e("ManageForm",{ref:"manageForm",attrs:{settings:t.settings},on:{submit:t.manageSubmit}})],1)],1)},o=[],r=e("b85c"),s=(e("e17f"),e("2241")),u=(e("c3a6"),e("ad06")),l=function(){var t=this,n=t.$createElement,e=t._self._c||n;return t.window.url?e("iframe",{attrs:{src:t.window.url,width:"100%",height:"100%"}}):e("div",{staticClass:"non-source-window"},[e("van-icon",{attrs:{name:"plus",color:"#ffffff",size:"40"},on:{click:function(n){return n.stopPropagation(),t.addSource(n)}}})],1)},c=[];i["a"].use(u["a"]);var d={name:"LiveWindow",data:function(){return{}},props:["window"],methods:{addSource:function(){this.$emit("addSource",this.window)}}},f=d,w=(e("745d"),e("2877")),m=Object(w["a"])(f,l,c,!1,null,"77130143",null),h=m.exports,p=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("van-form",{ref:"form",on:{submit:t.submit}},[e("van-field",{attrs:{name:"备注名",label:"备注名",rules:[{required:!0,message:"请输入直播备注名"}]},model:{value:t.formData.name,callback:function(n){t.$set(t.formData,"name",n)},expression:"formData.name"}}),e("van-field",{attrs:{name:"直播链接",label:"直播链接",rules:[{required:!0,message:"请输入直播链接"}]},model:{value:t.formData.url,callback:function(n){t.$set(t.formData,"url",n)},expression:"formData.url"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v(" 提交 ")])],1)],1)},v=[],b=(e("66b9"),e("b650")),g=(e("be7f"),e("565f")),W=(e("38d5"),e("772a")),y=e("2ef0");i["a"].use(u["a"]),i["a"].use(W["a"]),i["a"].use(g["a"]),i["a"].use(b["a"]);var M={name:"LiveWindowForm",data:function(){return{formData:{}}},props:["window"],methods:{submit:function(){this.$emit("submit",this.window,this.formData)}},watch:{window:{handler:function(t){this.formData=Object(y["cloneDeep"])(t||{})},deep:!0,immediate:!0}}},O=M,x=(e("e44e"),Object(w["a"])(O,p,v,!1,null,"235ea80d",null)),D=x.exports,_=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("van-form",{ref:"form",on:{submit:t.submit}},[e("van-field",{attrs:{name:"行数",label:"行数",type:"digit",rules:[{required:!0,message:"请输入行数"},{}]},model:{value:t.formData.nRows,callback:function(n){t.$set(t.formData,"nRows",n)},expression:"formData.nRows"}}),e("van-field",{attrs:{name:"每行窗口数量",label:"每行窗口数量",type:"digit",rules:[{required:!0,message:"请输入每行窗口数量"}]},model:{value:t.formData.nWindowsPerRow,callback:function(n){t.$set(t.formData,"nWindowsPerRow",n)},expression:"formData.nWindowsPerRow"}}),e("div",{staticStyle:{margin:"16px"}},[e("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[t._v(" 提交 ")])],1)],1)},k=[],j=(e("8fec"),e("7bd9"));i["a"].use(u["a"]),i["a"].use(W["a"]),i["a"].use(g["a"]),i["a"].use(j["a"]),i["a"].use(b["a"]);var S={name:"ManageForm",data:function(){return{formData:{}}},props:["settings"],methods:{submit:function(){this.$emit("submit",this.settings,this.formData)}},watch:{settings:{handler:function(t){this.formData=Object(y["cloneDeep"])(t||{})},deep:!0,immediate:!0}}},P=S,$=(e("ff70"),Object(w["a"])(P,_,k,!1,null,"0f899930",null)),R=$.exports;i["a"].use(u["a"]),i["a"].use(s["a"]);var F={name:"App",components:{LiveWindow:h,LiveWindowForm:D,ManageForm:R},data:function(){return{settings:{clientWidth:document.documentElement.clientWidth,clientHeight:document.documentElement.clientHeight,nWindowsPerRow:2,nRows:2},windows:[],manipulateWindow:null,showManipulateWindow:!1,showManage:!1}},methods:{resize:function(){this.clientHeight=document.documentElement.clientWidth},initWindows:function(){var t=this.settings.nWindowsPerRow*this.settings.nRows,n=[Math.floor(this.settings.clientWidth/this.settings.nWindowsPerRow),Math.floor(this.settings.clientHeight/this.settings.nRows)],e=n[0],i=n[1];while(this.windows.length<t)this.windows.push({id:"window".concat(this.windows.length),name:"窗口".concat(this.windows.length),width:e,height:i});var a,o=Object(r["a"])(this.windows);try{for(o.s();!(a=o.n()).done;){var s=a.value,u=[e,i];s.width=u[0],s.height=u[1]}}catch(l){o.e(l)}finally{o.f()}},setManipulateWindow:function(t){this.manipulateWindow=t,this.showManipulateWindow=!!this.manipulateWindow},manipulateWindowSubmit:function(t,n){for(var e in n)t[e]=n[e];this.setManipulateWindow(null),this.$refs[t.id][0].$forceUpdate()},manageSubmit:function(t,n){for(var e in n)t[e]=n[e];this.showManage=!1,this.initWindows()}},computed:{windowsMatrix:function(){var t=0,n=[],e=[],i=0;while(i<this.windows.length){var a=this.windows[i];a.width>this.settings.clientWidth-t?(t=0,e.push(n),n=[]):(t+=a.width,n.push(a),i+=1)}return e.push(n),e}},mounted:function(){this.initWindows()}},C=F,E=(e("034f"),e("6ed3"),Object(w["a"])(C,a,o,!1,null,"054d51de",null)),L=E.exports;e("499a");i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(L)}}).$mount("#app")},"6ed3":function(t,n,e){"use strict";var i=e("f006"),a=e.n(i);a.a},"745d":function(t,n,e){"use strict";var i=e("119a"),a=e.n(i);a.a},"85ec":function(t,n,e){},"89a4":function(t,n,e){},ac68:function(t,n,e){},e44e:function(t,n,e){"use strict";var i=e("ac68"),a=e.n(i);a.a},f006:function(t,n,e){},ff70:function(t,n,e){"use strict";var i=e("89a4"),a=e.n(i);a.a}});
//# sourceMappingURL=app.99faf702.js.map